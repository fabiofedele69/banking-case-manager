<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Banking Case Manager</title>
    <style>
      body { font-family: Arial, Helvetica, sans-serif; margin: 2rem; }
      .case { border: 1px solid #ddd; padding: 1rem; margin-bottom: 1rem; }
      .closed { background:#f8f8f8; color: #888; }
    </style>
  </head>
  <body>
    <h1>Banking Case Manager</h1>

    <h2>Create new case</h2>
    <form method="post">
      <div>
        <label>Title</label><br>
        <input type="text" name="title" required style="width:400px">
      </div>
      <div>
        <label>Description</label><br>
        <textarea name="description" rows="4" cols="60"></textarea>
      </div>
      <div style="margin-top:8px">
        <button type="submit">Create</button>
      </div>
    </form>

    <h2>Open cases</h2>
    {% for c in cases %}
      <div class="case {% if c.status != 'open' %}closed{% endif %}">
        <strong>#{{ c.id }} - {{ c.title }}</strong>
        <div><small>{{ c.created_at }}</small></div>
        <p>{{ c.description }}</p>
        <div>Status: {{ c.status }}</div>
        {% if c.status == 'open' %}
        <form method="post" action="/close/{{c.id}}">
          <button type="submit">Close</button>
        </form>
        {% endif %}
      </div>
    {% else %}
      <p>No cases found.</p>
    {% endfor %}

  </body>
</html>
